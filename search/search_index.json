{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Documenta\u00e7\u00e3o Comunix Local destinado a documenta\u00e7\u00e3o das ferramentas t\u00e9cnica da Comunix.","title":"Sobre"},{"location":"#documentacao-comunix","text":"Local destinado a documenta\u00e7\u00e3o das ferramentas t\u00e9cnica da Comunix.","title":"Documenta\u00e7\u00e3o Comunix"},{"location":"chatbot_exemples/","text":"Exemplos Menu Simples Simples menu com registro das op\u00e7\u00f5es nos relat\u00f3rios: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; $bot_ura = \"Chatbot Comunix\"; $cti = 0_0_0; botStartChat(); menu_principal: $bot_menu = \"Menu Principal\"; $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); menu_principal_getfull: $text = botGetFull(); $op = $text; switch($op){ case '1': case $menu[1]: $bot_opcao = $menu[1]; botUpdateMsgBot($bot_ura,$bot_menu,$bot_opcao,$cti); botTransfer(); break; case '2': case $menu[2]: $bot_opcao = $menu[2]; botUpdateMsgBot($bot_ura,$bot_menu,$bot_opcao,$cti); botTransfer(); break; default: botUpdateMsgBot($bot_ura,$bot_menu,\"i\",$cti); botInsertMsg(\"Desculpe, n\u00e3o entendi. Poderia tentar novamente?\"); goto menu_principal_getfull; } botFinishChat(); ?> Menu com utiliza\u00e7\u00e3o da Sophia Simples menu com com utiliza\u00e7\u00e3o da sophia Suponha que o arquivo de dicion\u00e1rio '/home/extend/sophia/menu_principal.ai' esteja configurado da seguinte maneira: //------FINANCEIRO--------- financeiro:#menu_principal#op_financeiro contas:#menu_principal#op_financeiro valores:#menu_principal#op_financeiro valor:#menu_principal#op_financeiro minha;conta:#menu_principal#op_financeiro //------COMERCIAL--------- produtos:#menu_principal#op_comercial produto:#menu_principal#op_comercial comprar:#menu_principal#op_comercial itens:#menu_principal#op_comercial O menu ficaria assim: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; $bot_ura = \"Chatbot Comunix\"; $cti = 0_0_0; $dic_menu_principal = \"/home/extend/sophia/menu_principal.ai\"; botStartChat(); menu_principal: $bot_menu = \"Menu Principal\"; $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); menu_principal_getfull: $text = botGetFull(); $op = botFaq($text, $dic_menu_principal); switch($op){ case '1': case #menu_principal#op_financeiro: $bot_opcao = $menu[1]; botUpdateMsgBot($bot_ura,$bot_menu,$bot_opcao,$cti); botTransfer(); break; case '2': case #menu_principal#op_comercial: $bot_opcao = $menu[2]; botUpdateMsgBot($bot_ura,$bot_menu,$bot_opcao,$cti); botTransfer(); break; default: botUpdateMsgBot($bot_ura,$bot_menu,\"i\",$cti); botInsertMsg(\"Desculpe, n\u00e3o entendi. Poderia tentar novamente?\"); goto menu_principal_getfull; } botFinishChat(); ?>","title":"Exemplos"},{"location":"chatbot_exemples/#exemplos","text":"","title":"Exemplos"},{"location":"chatbot_exemples/#menu-simples","text":"Simples menu com registro das op\u00e7\u00f5es nos relat\u00f3rios: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; $bot_ura = \"Chatbot Comunix\"; $cti = 0_0_0; botStartChat(); menu_principal: $bot_menu = \"Menu Principal\"; $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); menu_principal_getfull: $text = botGetFull(); $op = $text; switch($op){ case '1': case $menu[1]: $bot_opcao = $menu[1]; botUpdateMsgBot($bot_ura,$bot_menu,$bot_opcao,$cti); botTransfer(); break; case '2': case $menu[2]: $bot_opcao = $menu[2]; botUpdateMsgBot($bot_ura,$bot_menu,$bot_opcao,$cti); botTransfer(); break; default: botUpdateMsgBot($bot_ura,$bot_menu,\"i\",$cti); botInsertMsg(\"Desculpe, n\u00e3o entendi. Poderia tentar novamente?\"); goto menu_principal_getfull; } botFinishChat(); ?>","title":"Menu Simples"},{"location":"chatbot_exemples/#menu-com-utilizacao-da-sophia","text":"Simples menu com com utiliza\u00e7\u00e3o da sophia Suponha que o arquivo de dicion\u00e1rio '/home/extend/sophia/menu_principal.ai' esteja configurado da seguinte maneira: //------FINANCEIRO--------- financeiro:#menu_principal#op_financeiro contas:#menu_principal#op_financeiro valores:#menu_principal#op_financeiro valor:#menu_principal#op_financeiro minha;conta:#menu_principal#op_financeiro //------COMERCIAL--------- produtos:#menu_principal#op_comercial produto:#menu_principal#op_comercial comprar:#menu_principal#op_comercial itens:#menu_principal#op_comercial O menu ficaria assim: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; $bot_ura = \"Chatbot Comunix\"; $cti = 0_0_0; $dic_menu_principal = \"/home/extend/sophia/menu_principal.ai\"; botStartChat(); menu_principal: $bot_menu = \"Menu Principal\"; $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); menu_principal_getfull: $text = botGetFull(); $op = botFaq($text, $dic_menu_principal); switch($op){ case '1': case #menu_principal#op_financeiro: $bot_opcao = $menu[1]; botUpdateMsgBot($bot_ura,$bot_menu,$bot_opcao,$cti); botTransfer(); break; case '2': case #menu_principal#op_comercial: $bot_opcao = $menu[2]; botUpdateMsgBot($bot_ura,$bot_menu,$bot_opcao,$cti); botTransfer(); break; default: botUpdateMsgBot($bot_ura,$bot_menu,\"i\",$cti); botInsertMsg(\"Desculpe, n\u00e3o entendi. Poderia tentar novamente?\"); goto menu_principal_getfull; } botFinishChat(); ?>","title":"Menu com utiliza\u00e7\u00e3o da Sophia"},{"location":"chatbot_flow/","text":"Fluxo botStartChat Inicia o Chatbot Funcao: botStartChat() Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); ?> botFinishChat finaliza o Chatbot Funcao: botFinishChat() Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); sleep(5); botFinishChat(); ?> botTransfer Transfere para o antedimento humano. O tipo do canal \u00e9 identificado automaticamente. Funcao: botTransfer($cd_servico=0, $cifra_servico=0) Parametros: $cd_servico - Int -> \u2003\u2003 Codigo do servico que ser\u00e1 enviado. Ex: 545 \u2003\u2003 Envia para o servi\u00e7o caso preenchido. $cifra_servico - Int -> \u2003\u2003 Cifra do servico que ser\u00e1 enviado. Ex: 1101 \u2003\u2003 Verifica o formul\u00e1rio de servi\u00e7o. \u2003\u2003\u2003\u2003 Local json: /home/extend/servico/1101/1101.json. \u2003\u2003\u2003\u2003 Obs: Para ativar apenas o formul\u00e1rio de servi\u00e7o, basta configurar o $cd_servico=0. Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot. Vou te encaminhar para um de nossos atendentes.\"); botTransfer(); botFinishChat(); ?> botInsertMsg Envia mensagem de texto para o usu\u00e1rio Funcao: botInsertMsg($msg) Parametros: * $msg - String Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot\"); botFinishChat(); ?> botInsertButtom Envia Menu de op\u00e7\u00e3o para o usu\u00e1rio Funcao: botInsertButtom($btn,$wpp_prefix=1) Parametros: * $btn - Array -> \u2003\u2003 O primeiro indice do array ser\u00e1 sempre o t\u00edtulo. \u2003\u2003 Caso n\u00e3o tenha t\u00edtulo, configurar como \"\" $wpp_prefix - Int -> \u2003\u2003 Gera numera\u00e7\u00e3o na frente de cada op\u00e7\u00e3o quando est\u00e1 no Whatsapp \u2003\u2003 Ativado por padr\u00e3o. Configurar 0 para retirar Exemplo 1: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot\"); $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); botFinishChat(); ?> --------------------------------------------------------------- Exemplo 2: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot\"); $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"1 - Financeiro\", \"2 - Comercial\"); botInsertButtom($menu,0); botFinishChat(); ?> botInsertMedia Envia arquivo de media para o usu\u00e1rio Funcao: botInsertMedia($file) Parametros: * $file - String -> \u2003\u2003 Informar apenas o nome do arquivo. \u2003\u2003 local obrigat\u00f3rio dos arquivos: /var/www/nome_cliente/bot/media/send/ Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot.\"); botInsertMsg(\"Vamos te enviar um de nossos v\u00eddeos auxili\u00e1res\"); botInsertMedia(\"video_info.mp4\"); sleep(2); botFinishChat(); ?> botInsertPassword Envia campo no formato de senha. Campo com caracteres mascarados. A Fun\u00e7\u00e3o trava o campo de digita\u00e7\u00e3o do usu\u00e1rio, for\u00e7ando-o a digitar no campo de senha. Para destravar o campo de digita\u00e7\u00e3o deve ser enviado o comando 'botInsertMsg(\"\u00d6!\u00d6\")' apos o uso. IMPORTANTE: Fun\u00e7\u00e3o n\u00e3o est\u00e1 dispon\u00edvel para Whatsapp. Caso utilizado no Whatsapp, ser\u00e1 enviado uma mensagem normal. Funcao: botInsertPassword($msg) Parametros: * $file - String Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertPassword(\"Por favor, digite a sua senha\"); $text = botGetFull(); botInsertMsg(\"\u00d6!\u00d6\") botFinishChat(); ?> botGetFull Captura a digita\u00e7\u00e3o do usu\u00e1rio. Configura\u00e7\u00e3o padr\u00e3o em caso do uso da fun\u00e7\u00e3o sem par\u00e2metros. \u2003\u2003 60 segundos \u2003\u2003 3 repeti\u00e7\u00f5es \u2003\u2003 Mensagem de repeti\u00e7\u00e3o: \"Oi voc\u00ea ainda est\u00e1 por ai? Por favor escolha uma das op\u00e7\u00f5es\" \u2003\u2003 Mensagem da 3\u00b0 repeti\u00e7\u00e3o: \"Agradecemos seu contato!\" Em caso de envio de \u00e1udio pelo usu\u00e1rio no Whatsapp, a fun\u00e7\u00e3o detecta se a url publicada est\u00e1 na mensagem e traduz automaticamente o \u00e1udio para texto. Requisitos para funcionalidade: \u2003\u2003 * ffmpeg instalado \u2003\u2003 * Arquivo google_stt.py no diretorio: '/home/extend/scripts/google_stt.py' \u2003\u2003 * Chave da Google TTS com nome de \"key.json\" no diretorio: '/root/google-cloud-sdk/key.json' Funcao: botGetFull($repeticao_max=3, $timeout=60, $repeticao_msg_rep=\"\", $repeticao_msg_fim=\"\") Parametros: $timeout - Int -> \u2003\u2003 Tempo total de espera em segundos. $repeticao_max - Int/Array -> \u2003\u2003 Quantidade de repeti\u00e7\u00f5es. \u2003\u2003 Em caso de Array, a cada repeti\u00e7\u00e3o ser\u00e1 enviado cada \u00edndice do Array $repeticao_msg_rep - String/Array -> \u2003\u2003 Mensagem que ser\u00e1 enviada ap\u00f3s cada repeti\u00e7\u00e3o. \u2003\u2003 Em caso de Array, a cada repeti\u00e7\u00e3o ser\u00e1 enviado cada \u00edndice do Array $repeticao_msg_fim - String -> \u2003\u2003 Mensagem que ser\u00e1 envida na \u00faltima itera\u00e7\u00e3o. Retorno: String com texto digitado pelo usu\u00e1rio. Exemplo 1: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot\"); $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); //variavel $text recebe texto digitado pelo usu\u00e1rio $text = botGetFull(); botFinishChat(); ?> --------------------------------------------------------------- Exemplo 2: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot\"); $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); $msg_timeout = \"Oi, me fale o que est\u00e1 acontecendo. Tente digitar novamente, por favor \ud83d\ude0a\"; $msg_timeout_fim = \"Realmente n\u00e3o entendi \ud83d\ude14. Lamento, vou encerrar sua liga\u00e7\u00e3o.\"; //variavel $text recebe texto digitado pelo usu\u00e1rio $text = botGetFull(120, 4, $msg_timeout, $msg_timeout_fim); botFinishChat(); ?> --------------------------------------------------------------- Exemplo 3: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot\"); $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); $msg_timeout = array(\"Oi, me fale o que est\u00e1 acontecendo. Tente digitar novamente, por favor \ud83d\ude0a\", \"Voc\u00ea ainda est\u00e1 por ai?\", \"Ol\u00e1, podemos tentar novamente?\") $msg_timeout_fim = \"Realmente n\u00e3o entendi \ud83d\ude14. Lamento, vou encerrar sua liga\u00e7\u00e3o.\"; //variavel $text recebe texto digitado pelo usu\u00e1rio $text = botGetFull(120, 4, $msg_timeout, $msg_timeout_fim); botFinishChat(); ?> botFaq Utiliza a aplica\u00e7\u00e3o da Sophia, e retorna o valor do dicion\u00e1rio. IMPORTANTE: Necess\u00e1rio ter a aplica\u00e7\u00e3o da Sophia para o funcionamento. Diret\u00f3rio padr\u00e3o: /home/extend/sophia/ Funcao: botFaq($dic_sophia, $duvida, $assunto=\"\") Parametros: * $dic_sophia - String -> \u2003\u2003 Caminho completo do dici\u00f3nario * $duvida - String -> \u2003\u2003 Texto com a mensagem que ser\u00e1 enviada para o dicion\u00e1rio. * $assunto - String -> \u2003\u2003 Assunto relacionado. Registra automaticamente nos relat\u00f3rios quando configurado. Retorno: String com texto retornado pela melhor ocorr\u00eancia do dicion\u00e1rio. Em caso de n\u00e3o encontrar ocorr\u00eancia, ser\u00e1 retornado \"botFac_0\". Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; $sophia_dic = \"/home/extend/sophia/sophia.ai\"; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot\"); $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); $text = botGetFull(); $faq_results = botFaq($sophia_dic, $text); botFinishChat(); ?>","title":"Fluxo"},{"location":"chatbot_flow/#fluxo","text":"","title":"Fluxo"},{"location":"chatbot_flow/#botstartchat","text":"Inicia o Chatbot Funcao: botStartChat() Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); ?>","title":"botStartChat"},{"location":"chatbot_flow/#botfinishchat","text":"finaliza o Chatbot Funcao: botFinishChat() Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); sleep(5); botFinishChat(); ?>","title":"botFinishChat"},{"location":"chatbot_flow/#bottransfer","text":"Transfere para o antedimento humano. O tipo do canal \u00e9 identificado automaticamente. Funcao: botTransfer($cd_servico=0, $cifra_servico=0) Parametros: $cd_servico - Int -> \u2003\u2003 Codigo do servico que ser\u00e1 enviado. Ex: 545 \u2003\u2003 Envia para o servi\u00e7o caso preenchido. $cifra_servico - Int -> \u2003\u2003 Cifra do servico que ser\u00e1 enviado. Ex: 1101 \u2003\u2003 Verifica o formul\u00e1rio de servi\u00e7o. \u2003\u2003\u2003\u2003 Local json: /home/extend/servico/1101/1101.json. \u2003\u2003\u2003\u2003 Obs: Para ativar apenas o formul\u00e1rio de servi\u00e7o, basta configurar o $cd_servico=0. Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot. Vou te encaminhar para um de nossos atendentes.\"); botTransfer(); botFinishChat(); ?>","title":"botTransfer"},{"location":"chatbot_flow/#botinsertmsg","text":"Envia mensagem de texto para o usu\u00e1rio Funcao: botInsertMsg($msg) Parametros: * $msg - String Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot\"); botFinishChat(); ?>","title":"botInsertMsg"},{"location":"chatbot_flow/#botinsertbuttom","text":"Envia Menu de op\u00e7\u00e3o para o usu\u00e1rio Funcao: botInsertButtom($btn,$wpp_prefix=1) Parametros: * $btn - Array -> \u2003\u2003 O primeiro indice do array ser\u00e1 sempre o t\u00edtulo. \u2003\u2003 Caso n\u00e3o tenha t\u00edtulo, configurar como \"\" $wpp_prefix - Int -> \u2003\u2003 Gera numera\u00e7\u00e3o na frente de cada op\u00e7\u00e3o quando est\u00e1 no Whatsapp \u2003\u2003 Ativado por padr\u00e3o. Configurar 0 para retirar Exemplo 1: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot\"); $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); botFinishChat(); ?> --------------------------------------------------------------- Exemplo 2: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot\"); $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"1 - Financeiro\", \"2 - Comercial\"); botInsertButtom($menu,0); botFinishChat(); ?>","title":"botInsertButtom"},{"location":"chatbot_flow/#botinsertmedia","text":"Envia arquivo de media para o usu\u00e1rio Funcao: botInsertMedia($file) Parametros: * $file - String -> \u2003\u2003 Informar apenas o nome do arquivo. \u2003\u2003 local obrigat\u00f3rio dos arquivos: /var/www/nome_cliente/bot/media/send/ Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot.\"); botInsertMsg(\"Vamos te enviar um de nossos v\u00eddeos auxili\u00e1res\"); botInsertMedia(\"video_info.mp4\"); sleep(2); botFinishChat(); ?>","title":"botInsertMedia"},{"location":"chatbot_flow/#botinsertpassword","text":"Envia campo no formato de senha. Campo com caracteres mascarados. A Fun\u00e7\u00e3o trava o campo de digita\u00e7\u00e3o do usu\u00e1rio, for\u00e7ando-o a digitar no campo de senha. Para destravar o campo de digita\u00e7\u00e3o deve ser enviado o comando 'botInsertMsg(\"\u00d6!\u00d6\")' apos o uso. IMPORTANTE: Fun\u00e7\u00e3o n\u00e3o est\u00e1 dispon\u00edvel para Whatsapp. Caso utilizado no Whatsapp, ser\u00e1 enviado uma mensagem normal. Funcao: botInsertPassword($msg) Parametros: * $file - String Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertPassword(\"Por favor, digite a sua senha\"); $text = botGetFull(); botInsertMsg(\"\u00d6!\u00d6\") botFinishChat(); ?>","title":"botInsertPassword"},{"location":"chatbot_flow/#botgetfull","text":"Captura a digita\u00e7\u00e3o do usu\u00e1rio. Configura\u00e7\u00e3o padr\u00e3o em caso do uso da fun\u00e7\u00e3o sem par\u00e2metros. \u2003\u2003 60 segundos \u2003\u2003 3 repeti\u00e7\u00f5es \u2003\u2003 Mensagem de repeti\u00e7\u00e3o: \"Oi voc\u00ea ainda est\u00e1 por ai? Por favor escolha uma das op\u00e7\u00f5es\" \u2003\u2003 Mensagem da 3\u00b0 repeti\u00e7\u00e3o: \"Agradecemos seu contato!\" Em caso de envio de \u00e1udio pelo usu\u00e1rio no Whatsapp, a fun\u00e7\u00e3o detecta se a url publicada est\u00e1 na mensagem e traduz automaticamente o \u00e1udio para texto. Requisitos para funcionalidade: \u2003\u2003 * ffmpeg instalado \u2003\u2003 * Arquivo google_stt.py no diretorio: '/home/extend/scripts/google_stt.py' \u2003\u2003 * Chave da Google TTS com nome de \"key.json\" no diretorio: '/root/google-cloud-sdk/key.json' Funcao: botGetFull($repeticao_max=3, $timeout=60, $repeticao_msg_rep=\"\", $repeticao_msg_fim=\"\") Parametros: $timeout - Int -> \u2003\u2003 Tempo total de espera em segundos. $repeticao_max - Int/Array -> \u2003\u2003 Quantidade de repeti\u00e7\u00f5es. \u2003\u2003 Em caso de Array, a cada repeti\u00e7\u00e3o ser\u00e1 enviado cada \u00edndice do Array $repeticao_msg_rep - String/Array -> \u2003\u2003 Mensagem que ser\u00e1 enviada ap\u00f3s cada repeti\u00e7\u00e3o. \u2003\u2003 Em caso de Array, a cada repeti\u00e7\u00e3o ser\u00e1 enviado cada \u00edndice do Array $repeticao_msg_fim - String -> \u2003\u2003 Mensagem que ser\u00e1 envida na \u00faltima itera\u00e7\u00e3o. Retorno: String com texto digitado pelo usu\u00e1rio. Exemplo 1: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot\"); $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); //variavel $text recebe texto digitado pelo usu\u00e1rio $text = botGetFull(); botFinishChat(); ?> --------------------------------------------------------------- Exemplo 2: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot\"); $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); $msg_timeout = \"Oi, me fale o que est\u00e1 acontecendo. Tente digitar novamente, por favor \ud83d\ude0a\"; $msg_timeout_fim = \"Realmente n\u00e3o entendi \ud83d\ude14. Lamento, vou encerrar sua liga\u00e7\u00e3o.\"; //variavel $text recebe texto digitado pelo usu\u00e1rio $text = botGetFull(120, 4, $msg_timeout, $msg_timeout_fim); botFinishChat(); ?> --------------------------------------------------------------- Exemplo 3: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot\"); $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); $msg_timeout = array(\"Oi, me fale o que est\u00e1 acontecendo. Tente digitar novamente, por favor \ud83d\ude0a\", \"Voc\u00ea ainda est\u00e1 por ai?\", \"Ol\u00e1, podemos tentar novamente?\") $msg_timeout_fim = \"Realmente n\u00e3o entendi \ud83d\ude14. Lamento, vou encerrar sua liga\u00e7\u00e3o.\"; //variavel $text recebe texto digitado pelo usu\u00e1rio $text = botGetFull(120, 4, $msg_timeout, $msg_timeout_fim); botFinishChat(); ?>","title":"botGetFull"},{"location":"chatbot_flow/#botfaq","text":"Utiliza a aplica\u00e7\u00e3o da Sophia, e retorna o valor do dicion\u00e1rio. IMPORTANTE: Necess\u00e1rio ter a aplica\u00e7\u00e3o da Sophia para o funcionamento. Diret\u00f3rio padr\u00e3o: /home/extend/sophia/ Funcao: botFaq($dic_sophia, $duvida, $assunto=\"\") Parametros: * $dic_sophia - String -> \u2003\u2003 Caminho completo do dici\u00f3nario * $duvida - String -> \u2003\u2003 Texto com a mensagem que ser\u00e1 enviada para o dicion\u00e1rio. * $assunto - String -> \u2003\u2003 Assunto relacionado. Registra automaticamente nos relat\u00f3rios quando configurado. Retorno: String com texto retornado pela melhor ocorr\u00eancia do dicion\u00e1rio. Em caso de n\u00e3o encontrar ocorr\u00eancia, ser\u00e1 retornado \"botFac_0\". Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; $sophia_dic = \"/home/extend/sophia/sophia.ai\"; botStartChat(); botInsertMsg(\"Sauda\u00e7\u00f5es. Bem vindo ao nosso Bot\"); $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); $text = botGetFull(); $faq_results = botFaq($sophia_dic, $text); botFinishChat(); ?>","title":"botFaq"},{"location":"chatbot_info/","text":"Informa\u00e7\u00f5es botGetFirstWord Captura a primeira mensagem enviada pelo usu\u00e1rio Funcao: botGetFirstWord() Retorno: String com texto da primeira mensagem enviada pelo usu\u00e1rio Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); $first_wold = botGetFirstWord(); botFinishChat(); ?> botGetTelefone Captura o Telefone do usu\u00e1rio. Campo \"Number\" da tabela do banco Funcao: botGetTelefone() Retorno: N\u00famero do telefone do usu\u00e1rio Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); $telefone = botGetTelefone(); botFinishChat(); ?> botGetPosicaoFila Captura a posi\u00e7\u00e3o da fila do usu\u00e1rio. Funcao: botGetPosicaoFila() Retorno: N\u00famero da pos\u00ed\u00e7\u00e3o da fila do usu\u00e1rio. Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); $pos_fila = botGetPosicaoFila(); if($pos_fila > 0){ botInsertMsg(\"Por favor aguarde, voc\u00ea \u00e9 o n\u00famero $pos_fila da fila\"); } botFinishChat(); ?> botGetConversaInteira Consulta toda a conversa do usu\u00e1rio com o bot. Funcao: botGetConversaInteira() Retorno: String com a conversa inteira dividido por \"|--\" Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); $conversa = botGetConversaInteira(); botFinishChat(); ?>","title":"Infoma\u00e7\u00f5es"},{"location":"chatbot_info/#informacoes","text":"","title":"Informa\u00e7\u00f5es"},{"location":"chatbot_info/#botgetfirstword","text":"Captura a primeira mensagem enviada pelo usu\u00e1rio Funcao: botGetFirstWord() Retorno: String com texto da primeira mensagem enviada pelo usu\u00e1rio Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); $first_wold = botGetFirstWord(); botFinishChat(); ?>","title":"botGetFirstWord"},{"location":"chatbot_info/#botgettelefone","text":"Captura o Telefone do usu\u00e1rio. Campo \"Number\" da tabela do banco Funcao: botGetTelefone() Retorno: N\u00famero do telefone do usu\u00e1rio Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); $telefone = botGetTelefone(); botFinishChat(); ?>","title":"botGetTelefone"},{"location":"chatbot_info/#botgetposicaofila","text":"Captura a posi\u00e7\u00e3o da fila do usu\u00e1rio. Funcao: botGetPosicaoFila() Retorno: N\u00famero da pos\u00ed\u00e7\u00e3o da fila do usu\u00e1rio. Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); $pos_fila = botGetPosicaoFila(); if($pos_fila > 0){ botInsertMsg(\"Por favor aguarde, voc\u00ea \u00e9 o n\u00famero $pos_fila da fila\"); } botFinishChat(); ?>","title":"botGetPosicaoFila"},{"location":"chatbot_info/#botgetconversainteira","text":"Consulta toda a conversa do usu\u00e1rio com o bot. Funcao: botGetConversaInteira() Retorno: String com a conversa inteira dividido por \"|--\" Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); $conversa = botGetConversaInteira(); botFinishChat(); ?>","title":"botGetConversaInteira"},{"location":"chatbot_pesquisa/","text":"Pesquisa botRegistroPesquisa Gera pesquisa de satisfa\u00e7\u00e3o A fun\u00e7\u00e3o deve receber um array de perguntas e outro array com as respectivas resposta em ordem Funcao: botRegistroPesquisa($arr_pergunta, $arr_resposta) Parametros: * $arr_pergunta - Array * $arr_resposta - Array Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $email=$argv[2]; $assunto=$argv[3]; botStartChat(); $pergunta_1 = \"Conte como foi sua experi\u00eancia com nosso bot\"; $pergunta_2 = \"Conte como foi sua experi\u00eancia com nosso atendente Humano\"; botInsertMsg($pergunta_1); $resposta_1 = botGetFull(); botInsertMsg($pergunta_2); $resposta_2 = botGetFull(); botRegistroPesquisa(array($pergunta_1, $pergunta_2), array($resposta_1, $resposta_2)); botFinishChat(); ?>","title":"Pesquisa"},{"location":"chatbot_pesquisa/#pesquisa","text":"","title":"Pesquisa"},{"location":"chatbot_pesquisa/#botregistropesquisa","text":"Gera pesquisa de satisfa\u00e7\u00e3o A fun\u00e7\u00e3o deve receber um array de perguntas e outro array com as respectivas resposta em ordem Funcao: botRegistroPesquisa($arr_pergunta, $arr_resposta) Parametros: * $arr_pergunta - Array * $arr_resposta - Array Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $email=$argv[2]; $assunto=$argv[3]; botStartChat(); $pergunta_1 = \"Conte como foi sua experi\u00eancia com nosso bot\"; $pergunta_2 = \"Conte como foi sua experi\u00eancia com nosso atendente Humano\"; botInsertMsg($pergunta_1); $resposta_1 = botGetFull(); botInsertMsg($pergunta_2); $resposta_2 = botGetFull(); botRegistroPesquisa(array($pergunta_1, $pergunta_2), array($resposta_1, $resposta_2)); botFinishChat(); ?>","title":"botRegistroPesquisa"},{"location":"chatbot_start/","text":"Chatbot Comunix Clique aqui para donwload do arquivo functionsBot.php Clique aqui para donwload do arquivo google_stt.py Por padr\u00e3o o chatbot estar\u00e1 no diret\u00f3rio: '/var/www/'. Ao acessa-lo, conter\u00e1 o diret\u00f3rio com o nome do cliente. Podendo haver mais de 1 ambiente para o mesmo cliente. Ex: '/var/www/omni_comunix' Dentro do diret\u00f3rio do ambiente conter\u00e1 diversos arquivos de configura\u00e7\u00e3o, entretanto haver\u00e1 um diretorio chamado 'bot', onde conter\u00e1 os arquivo de fluxo. Ex: '/var/www/omni_comunix/bot' O Chatbot ou Whatsapp se inicia atrav\u00e9s do Trata. Ser\u00e1 criado uma thread para cada atendimento. Sempre ser\u00e1 chamado o arquivo de no nome 'bot_thread_chat.php' para Chatbox Externo ou 'bot_thread_whats.php' para Whatsapp. Cada thread \u00e9 iniciada pelo trata atrav\u00e9s de parametros, sendo eles: \u2003\u2003 Id - identificador do atendimento \u2003\u2003 Telefone - telefone do usuario (Whatsapp) \u2003\u2003 Adicional - informa\u00e7\u00e3o adicional \u2003\u2003 Exemplos: \u2003\u2003\u2003\u2003 php /var/www/suporte/bot/bot_thread_chat.php 699 \u2003\u2003\u2003\u2003 php /var/www/omnisebraesp/bot/bot_thread_whats.php 42221 5561999999999 O fluxo do bot ser\u00e1 criado atrav\u00e9s dos arquivos de inicializa\u00e7\u00e3o. S\u00e3o eles \"bot_thread_chat.php\" e bot_thread_whats.php O arquivo de fun\u00e7\u00f5es deve ser inclu\u00eddo no aquivo do bot. Abaixo Modelo de inicio de um bot: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); ?> As fun\u00e7\u00f5es a baixo geram log em '/var/log/chatbot_log/': \u2003\u2003 botUpdateMsgBot \u2003\u2003 botUpdateCTI \u2003\u2003 botUpdateAgent \u2003\u2003 botRegistroPesquisa \u2003\u2003 botUpdateMsgSophia (Fun\u00e7\u00e3o autom\u00e1tica ao usar a fun\u00e7\u00e3o 'botFaq') \u2003\u2003 botVerificaHorarioFormulario (Fun\u00e7\u00e3o autom\u00e1tica ao usar a fun\u00e7\u00e3o 'botTransfer')","title":"Start"},{"location":"chatbot_start/#chatbot-comunix","text":"","title":"Chatbot Comunix"},{"location":"chatbot_updade/","text":"Update/Info botUpdateMsgBot Atualiza o campo do relat\u00f3rio: CHAT_NOME - MENU - OPCAO - CTI Em caso do uso da fun\u00e7\u00e3o botFaq() os dados referentes \u00e0 Sophia ser\u00e3o registrados automaticamente. Para isso, basta as variav\u00e9is $bot_nome, $bot_menu e $bot_opcao estarem preenchidas. Funcao: botUpdateMsgBot($bot_nome,$bot_menu,$bot_opcao,$cti) Parametros: * $bot_nome - String * $bot_menu - String * $bot_opcao - String -> \u2003\u2003 Pode ser informado \"i\" para op\u00e7\u00e3o invalida \u2003\u2003 OBS: A op\u00e7\u00e3o \"Timeout\" e resgistrada automaticamente pela fun\u00e7\u00e3o botGetFull() * $cti - String -> \u2003\u2003 Formato padr\u00e3o do CTI: PROCOCOLO_CPF_OUTROS \u2003\u2003 Em caso de n\u00e3o utilizar, configurar como: 0_0_0 Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; $bot_nome = \"Chatbot Comunix\"; $cti = 0_0_0; botStartChat(); $bot_menu = \"Menu Principal\"; $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); menu_principal_getfull: $text = botGetFull(); $op = $text; switch($op){ case '1': case $menu[1]: $bot_opcao = $menu[1]; botUpdateMsgBot($bot_ura,$bot_menu,$bot_opcao,$cti); botTransfer(); break; case '2': case $menu[2]: $bot_opcao = $menu[2]; botUpdateMsgBot($bot_ura,$bot_menu,$bot_opcao,$cti); botTransfer(); break; default: botUpdateMsgBot($bot_ura,$bot_menu,\"i\",$cti); botInsertMsg(\"Desculpe, n\u00e3o entendi. Poderia tentar novamente?\"); goto menu_principal_getfull; } botFinishChat(); ?> botUpdateCTI Atualiza o campo do CTI Funcao: botUpdateCTI($cti_new) Parametros: * $cti_new - String Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botUpdateCTI(\"909090_0_0\"); botTransfer(); botFinishChat(); ?> botUpdateAgent Atualiza o agente que receber\u00e1 o atendimento Funcao: botUpdateAgent($id_user) Parametros: * $id_user - Int Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botUpdateAgent(500500); botTransfer(); botFinishChat(); ?>","title":"Updates"},{"location":"chatbot_updade/#updateinfo","text":"","title":"Update/Info"},{"location":"chatbot_updade/#botupdatemsgbot","text":"Atualiza o campo do relat\u00f3rio: CHAT_NOME - MENU - OPCAO - CTI Em caso do uso da fun\u00e7\u00e3o botFaq() os dados referentes \u00e0 Sophia ser\u00e3o registrados automaticamente. Para isso, basta as variav\u00e9is $bot_nome, $bot_menu e $bot_opcao estarem preenchidas. Funcao: botUpdateMsgBot($bot_nome,$bot_menu,$bot_opcao,$cti) Parametros: * $bot_nome - String * $bot_menu - String * $bot_opcao - String -> \u2003\u2003 Pode ser informado \"i\" para op\u00e7\u00e3o invalida \u2003\u2003 OBS: A op\u00e7\u00e3o \"Timeout\" e resgistrada automaticamente pela fun\u00e7\u00e3o botGetFull() * $cti - String -> \u2003\u2003 Formato padr\u00e3o do CTI: PROCOCOLO_CPF_OUTROS \u2003\u2003 Em caso de n\u00e3o utilizar, configurar como: 0_0_0 Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; $bot_nome = \"Chatbot Comunix\"; $cti = 0_0_0; botStartChat(); $bot_menu = \"Menu Principal\"; $menu = array(\"Escolha uma das op\u00e7\u00f5es\", \"Financeiro\", \"Comercial\"); botInsertButtom($menu); menu_principal_getfull: $text = botGetFull(); $op = $text; switch($op){ case '1': case $menu[1]: $bot_opcao = $menu[1]; botUpdateMsgBot($bot_ura,$bot_menu,$bot_opcao,$cti); botTransfer(); break; case '2': case $menu[2]: $bot_opcao = $menu[2]; botUpdateMsgBot($bot_ura,$bot_menu,$bot_opcao,$cti); botTransfer(); break; default: botUpdateMsgBot($bot_ura,$bot_menu,\"i\",$cti); botInsertMsg(\"Desculpe, n\u00e3o entendi. Poderia tentar novamente?\"); goto menu_principal_getfull; } botFinishChat(); ?>","title":"botUpdateMsgBot"},{"location":"chatbot_updade/#botupdatecti","text":"Atualiza o campo do CTI Funcao: botUpdateCTI($cti_new) Parametros: * $cti_new - String Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botUpdateCTI(\"909090_0_0\"); botTransfer(); botFinishChat(); ?>","title":"botUpdateCTI"},{"location":"chatbot_updade/#botupdateagent","text":"Atualiza o agente que receber\u00e1 o atendimento Funcao: botUpdateAgent($id_user) Parametros: * $id_user - Int Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $id=$argv[1]; $telefone=$argv[2]; $assunto=$argv[3]; botStartChat(); botUpdateAgent(500500); botTransfer(); botFinishChat(); ?>","title":"botUpdateAgent"},{"location":"chatbot_useful/","text":"Utilidades removeAcento Remove acentos e caracteres especiais de uma string. Funcao : removeAcento($msg) Parametros: * msg - String Retorno: String com texto formatado. Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $x = 'Palavra com Acentua\u00e7\u00e3o'; $y = removeAcento($x); print($y); ?> output: Palavra com Acentuacao unidecode Remove acentos e caracteres especiais de uma string deixando tudo em minusculo. Funcao : unidecode($msg) Parametros: * msg - String Retorno: String com texto formatado. Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $x = 'Palavra com Acentua\u00e7\u00e3o'; $y = unidecode($x); print($y); ?> output: palavra com acentuacao onlyNumber Extrai apenas os n\u00fameros de uma string. Funcao : onlyNumber($msg) Parametros: * msg - String Retorno: String com texto formatado. Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $x = 'Meu CPF \u00e9 999.999.999-00'; $y = onlyNumber($x); print($y); ?> output: 99999999900","title":"Utilidades"},{"location":"chatbot_useful/#utilidades","text":"","title":"Utilidades"},{"location":"chatbot_useful/#removeacento","text":"Remove acentos e caracteres especiais de uma string. Funcao : removeAcento($msg) Parametros: * msg - String Retorno: String com texto formatado. Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $x = 'Palavra com Acentua\u00e7\u00e3o'; $y = removeAcento($x); print($y); ?> output: Palavra com Acentuacao","title":"removeAcento"},{"location":"chatbot_useful/#unidecode","text":"Remove acentos e caracteres especiais de uma string deixando tudo em minusculo. Funcao : unidecode($msg) Parametros: * msg - String Retorno: String com texto formatado. Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $x = 'Palavra com Acentua\u00e7\u00e3o'; $y = unidecode($x); print($y); ?> output: palavra com acentuacao","title":"unidecode"},{"location":"chatbot_useful/#onlynumber","text":"Extrai apenas os n\u00fameros de uma string. Funcao : onlyNumber($msg) Parametros: * msg - String Retorno: String com texto formatado. Exemplo: <?php header('Content-Type: text/html; charset=utf-8'); header(\"Access-Control-Allow-Origin: *\"); header(\"Access-Control-Allow-Headers: Content-Type\"); include dirname(__FILE__).'/functionsBot.php'; error_reporting(1); $x = 'Meu CPF \u00e9 999.999.999-00'; $y = onlyNumber($x); print($y); ?> output: 99999999900","title":"onlyNumber"}]}